# THE-Seed Web Console è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

ä¸€ä¸ª Web ç«¯æ§åˆ¶å°ï¼Œç”¨äºè¿œç¨‹æ“æ§ OpenRA æ¸¸æˆå’Œ AI Agentã€‚

## è®¿é—®æ–¹å¼

- **å†…ç½‘**: `http://192.168.0.67:8000/console.html`
- **å…¬ç½‘**: `https://openra.ananthe.party` (é€šè¿‡ nginx åä»£)

---

## é¡µé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [æœåŠ¡æ§åˆ¶æ ]                                                          é¡¶éƒ¨  â”‚
â”‚ [Git Pull] [ç¼–è¯‘] [å¯åŠ¨æ¸¸æˆ] [é‡å¯æ¸¸æˆ] [åœæ­¢] | çŠ¶æ€: â— è¿è¡Œä¸­ | CPU/MEM   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚                                 â”‚
â”‚                                           â”‚  [å¯¹è¯åŒº]                       â”‚
â”‚           VNC æ¸¸æˆç”»é¢                    â”‚                                 â”‚
â”‚           (å¯äº¤äº’)                        â”‚  â”Œâ”€ å‰¯å®˜å¯¹è¯ â”€â” â”Œâ”€ æ•Œæ–¹å–Šè¯ â”€â”  â”‚
â”‚                                           â”‚  â”‚            â”‚ â”‚            â”‚  â”‚
â”‚           å  ~60% å®½åº¦                    â”‚  â”‚ èŠå¤©å†å²   â”‚ â”‚ èŠå¤©å†å²   â”‚  â”‚
â”‚           å›ºå®šé«˜åº¦ (å¦‚ 720px)             â”‚  â”‚ ...        â”‚ â”‚ ...        â”‚  â”‚
â”‚                                           â”‚  â”‚            â”‚ â”‚            â”‚  â”‚
â”‚                                           â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚                                           â”‚  â”‚ [è¾“å…¥æ¡†]   â”‚ â”‚ [è¾“å…¥æ¡†]   â”‚  â”‚
â”‚                                           â”‚  â”‚ [å‘é€]     â”‚ â”‚ [å‘é€]     â”‚  â”‚
â”‚                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                           â”‚                                 â”‚
â”‚                                           â”‚  å  ~40% å®½åº¦                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Debug å·¥å…·åŒº]                                                       ä¸‹æ–¹   â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Tabs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [ğŸ“‹ Logs] [ğŸ” FSM State] [ğŸ“Š Metrics] [ğŸ—‚ï¸ Blackboard] [âš™ï¸ Config] [+] â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ å†…å®¹åŒº (å¯æ»šåŠ¨ï¼Œé«˜åº¦è‡ªé€‚åº”ï¼Œå¯å‘ä¸‹å±•å¼€å¾ˆå¤š) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â”‚ 2024-01-26 04:55:01 [INFO] FSM transition: IDLE -> OBSERVE            â”‚   â”‚
â”‚ â”‚ 2024-01-26 04:55:02 [INFO] Observing game state...                    â”‚   â”‚
â”‚ â”‚ 2024-01-26 04:55:03 [INFO] CodeGen: generating code for "é€ 5ä¸ªæ­¥å…µ"   â”‚   â”‚
â”‚ â”‚ 2024-01-26 04:55:05 [DEBUG] Code execution result: success            â”‚   â”‚
â”‚ â”‚ ...                                                                   â”‚   â”‚
â”‚ â”‚ (å¯æ— é™æ»šåŠ¨)                                                          â”‚   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ é«˜åº¦: å¯æŠ˜å /å±•å¼€ï¼Œé»˜è®¤ 300pxï¼Œå¯æ‹–æ‹½è°ƒæ•´                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¨¡å—è¯¦ç»†è®¾è®¡

### 1. æœåŠ¡æ§åˆ¶æ  (é¡¶éƒ¨)

**ä½ç½®**: é¡µé¢æœ€é¡¶éƒ¨ï¼Œå›ºå®šé«˜åº¦ ~50px

**åŠŸèƒ½æŒ‰é’®**:
| æŒ‰é’® | åŠŸèƒ½ | å®ç° |
|------|------|------|
| Git Pull | æ‹‰å–æœ€æ–°ä»£ç  | `git pull` |
| ç¼–è¯‘ | ç¼–è¯‘ OpenRA | `make` æˆ–è‡ªå®šä¹‰è„šæœ¬ |
| å¯åŠ¨æ¸¸æˆ | å¯åŠ¨ OpenRA | `DISPLAY=:99 ./openra &` |
| é‡å¯æ¸¸æˆ | é‡å¯ OpenRA | kill + å¯åŠ¨ |
| åœæ­¢ | åœæ­¢æ¸¸æˆ | `pkill openra` |
| å¯åŠ¨ AI | å¯åŠ¨ THE-Seed | `python main.py` |
| åœæ­¢ AI | åœæ­¢ THE-Seed | kill python |

**çŠ¶æ€æŒ‡ç¤º**:
- æ¸¸æˆçŠ¶æ€: è¿è¡Œä¸­ / å·²åœæ­¢ / å¯åŠ¨ä¸­
- AI çŠ¶æ€: è¿æ¥ / æ–­å¼€
- ç³»ç»Ÿèµ„æº: CPU / å†…å­˜ (å¯é€‰)

**å¾…ç¡®è®¤**:
- [ ] ç¼–è¯‘å‘½ä»¤å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ
- [ ] OpenRA å¯åŠ¨å‘½ä»¤ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦æ›´å¤šæ§åˆ¶æŒ‰é’®ï¼Ÿ

---

### 2. VNC æ¸¸æˆç”»é¢ (å·¦ä¾§)

**ä½ç½®**: ä¸­é—´åŒºåŸŸå·¦ä¾§ï¼Œå  ~60% å®½åº¦

**åŠŸèƒ½**:
- åµŒå…¥ noVNC iframe
- é¼ æ ‡/é”®ç›˜å®Œå…¨æ˜ å°„
- æ”¯æŒç¼©æ”¾é€‚åº”

**å‚æ•°**:
- åˆ†è¾¨ç‡: 1280x720 (å¯é…ç½®)
- è‡ªåŠ¨è¿æ¥: `?autoconnect=true`
- ç¼©æ”¾æ¨¡å¼: `?resize=scale`

**å¾…ç¡®è®¤**:
- [ ] æ¸¸æˆåˆ†è¾¨ç‡å›ºå®šè¿˜æ˜¯è‡ªé€‚åº”ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦å…¨å±æŒ‰é’®ï¼Ÿ

---

### 3. å¯¹è¯åŒº (å³ä¾§)

**ä½ç½®**: ä¸­é—´åŒºåŸŸå³ä¾§ï¼Œå  ~40% å®½åº¦

**åˆ†ä¸ºä¸¤ä¸ªå¯¹è¯æ¡†**:

#### 3.1 å‰¯å®˜å¯¹è¯ (Copilot)
- ç”¨é€”: æŒ‡æŒ¥å·±æ–¹ AI Agent
- WebSocket: è¿æ¥ THE-Seed Dashboard Bridge (ws://host:8080)
- åŠŸèƒ½:
  - å‘é€æŒ‡ä»¤
  - æ˜¾ç¤º AI å›å¤
  - æ˜¾ç¤ºæ‰§è¡Œç»“æœ
  - å†å²è®°å½• (å¯æ»šåŠ¨)

#### 3.2 æ•Œæ–¹å–Šè¯ (Enemy Chat)
- ç”¨é€”: ä¸æ•Œæ–¹ AI Agent å¯¹è¯
- WebSocket: éœ€è¦æ–°çš„ç«¯å£ï¼Ÿæˆ–è€…å¤ç”¨ï¼Ÿ
- åŠŸèƒ½:
  - å‘é€å–Šè¯
  - æ¥æ”¶æ•Œæ–¹æ¶ˆæ¯
  - å†å²è®°å½•

**å¾…ç¡®è®¤**:
- [ ] æ•Œæ–¹ AI çš„é€šä¿¡åè®®ï¼Ÿå•ç‹¬çš„ WebSocket ç«¯å£ï¼Ÿ
- [ ] ä¸¤ä¸ªå¯¹è¯æ¡†æ˜¯ Tab åˆ‡æ¢è¿˜æ˜¯å¹¶æ’æ˜¾ç¤ºï¼Ÿ
- [ ] æ¶ˆæ¯æ ¼å¼ï¼Ÿéœ€è¦æ˜¾ç¤ºæ—¶é—´æˆ³ã€å‘é€è€…å—ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦è¡¨æƒ…/å¿«æ·è¯­ï¼Ÿ

---

### 4. Debug å·¥å…·åŒº (ä¸‹æ–¹)

**ä½ç½®**: é¡µé¢ä¸‹æ–¹ï¼Œå¯æŠ˜å /å±•å¼€

**Tab è®¾è®¡** (å¯æ‰©å±•):

| Tab | å†…å®¹ | æ•°æ®æ¥æº |
|-----|------|---------|
| ğŸ“‹ Logs | å®æ—¶æ—¥å¿—æµ | WebSocket / æ–‡ä»¶ tail |
| ğŸ” FSM State | AI çŠ¶æ€æœºçŠ¶æ€ | Dashboard Bridge |
| ğŸ“Š Metrics | æ€§èƒ½æŒ‡æ ‡ | Dashboard Bridge |
| ğŸ—‚ï¸ Blackboard | AI é»‘æ¿æ•°æ® | Dashboard Bridge |
| âš™ï¸ Config | é…ç½®æŸ¥çœ‹/ç¼–è¾‘ | æ–‡ä»¶è¯»å†™ |
| ğŸ® Game State | æ¸¸æˆçŠ¶æ€ | OpenRA API |
| + | æ·»åŠ æ–° Tab | å¯æ‰©å±• |

**ç‰¹æ€§**:
- é«˜åº¦å¯æ‹–æ‹½è°ƒæ•´
- å¯æŠ˜å æ”¶èµ·
- å†…å®¹åŒºå¯æ— é™æ»šåŠ¨
- æ”¯æŒæœç´¢/è¿‡æ»¤

**å¾…ç¡®è®¤**:
- [ ] è¿˜éœ€è¦å“ªäº› Debug å·¥å…·ï¼Ÿ
- [ ] Log æ–‡ä»¶è·¯å¾„åœ¨å“ªï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦ä»£ç æŸ¥çœ‹å™¨ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦ç»ˆç«¯ (xterm.js)ï¼Ÿ

---

## ç½‘ç»œæ¶æ„

### å†…ç½‘ç›´è¿
```
æµè§ˆå™¨ --HTTP--> 192.168.0.67:8000 (Web Console)
       --WS----> 192.168.0.67:6080 (noVNC)
       --WS----> 192.168.0.67:8080 (Dashboard Bridge)
```

### å…¬ç½‘åä»£ (nginx)

**ç›®æ ‡åŸŸå**: `https://openra.ananthe.party`

**ç«¯å£æ˜ å°„**:
```
/           -> localhost:8000  (Web Console)
/vnc/       -> localhost:6080  (noVNC WebSocket)
/api/       -> localhost:8080  (Dashboard Bridge WebSocket)
```

**nginx é…ç½®å‚è€ƒ**:
```nginx
server {
    listen 443 ssl;
    server_name openra.ananthe.party;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    # Web Console
    location / {
        proxy_pass http://127.0.0.1:8000;
    }

    # noVNC WebSocket
    location /vnc/ {
        proxy_pass http://127.0.0.1:6080/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_read_timeout 86400;
    }

    # Dashboard Bridge WebSocket
    location /api/ {
        proxy_pass http://127.0.0.1:8080/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_read_timeout 86400;
    }
}
```

**å·²ç¡®è®¤**:
- âœ… SSL: Let's Encrypt (Certbot è‡ªåŠ¨ç®¡ç†)
- âœ… é…ç½®ä½ç½®: `/etc/nginx/sites-available/`
- âœ… æ”¯æŒ Basic Auth (å‚è€ƒ gt2.ananthe.party)

**å¾…ç¡®è®¤**:
- [ ] æ˜¯å¦éœ€è¦ HTTP Basic Auth ä¿æŠ¤ï¼Ÿ

---

## æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ |
|------|------|
| å‰ç«¯æ¡†æ¶ | çº¯ HTML/CSS/JS (ç®€å•) æˆ– Vue/React (å¤æ‚) |
| VNC | noVNC (å·²æœ‰) |
| WebSocket | åŸç”Ÿ WebSocket API |
| åç«¯ API | Python (å¯é€‰ï¼Œç”¨äºæœåŠ¡æ§åˆ¶) |
| ç»ˆç«¯ | xterm.js (å¯é€‰) |

**å¾…ç¡®è®¤**:
- [ ] å‰ç«¯ç”¨çº¯ JS è¿˜æ˜¯æ¡†æ¶ï¼Ÿ
- [ ] æ˜¯å¦éœ€è¦åç«¯ API æœåŠ¡ï¼Ÿ

---

## å¾…è®¨è®ºé—®é¢˜æ±‡æ€»

### å¸ƒå±€
1. VNC å’Œå¯¹è¯åŒºçš„å®½åº¦æ¯”ä¾‹ï¼Ÿ60:40 åˆé€‚å—ï¼Ÿ
2. Debug åŒºé»˜è®¤é«˜åº¦ï¼Ÿå¯æŠ˜å å—ï¼Ÿ
3. å¯¹è¯æ¡†æ˜¯ Tab åˆ‡æ¢è¿˜æ˜¯å¹¶æ’ï¼Ÿ

### åŠŸèƒ½
4. æ•Œæ–¹ AI é€šä¿¡åè®®æ˜¯ä»€ä¹ˆï¼Ÿ
5. ç¼–è¯‘å’Œå¯åŠ¨ OpenRA çš„å…·ä½“å‘½ä»¤ï¼Ÿ
6. è¿˜éœ€è¦å“ªäº› Debug å·¥å…·ï¼Ÿ
7. æ˜¯å¦éœ€è¦å†…ç½®ç»ˆç«¯ï¼Ÿ

### ç½‘ç»œ
8. nginx ç°æœ‰é…ç½®ä½ç½®ï¼Ÿ
9. SSL è¯ä¹¦æ–¹æ¡ˆï¼Ÿ
10. æ˜¯å¦éœ€è¦è®¤è¯ï¼Ÿ

---

## ç‰ˆæœ¬è®¡åˆ’

### v0.1 - MVP
- [x] Xvfb + VNC åŸºç¡€
- [ ] åŸºæœ¬å¸ƒå±€ (VNC + ä¾§è¾¹æ )
- [ ] å‰¯å®˜å¯¹è¯åŠŸèƒ½
- [ ] nginx åä»£

### v0.2 - åŠŸèƒ½å®Œå–„
- [ ] æœåŠ¡æ§åˆ¶æ 
- [ ] æ•Œæ–¹å–Šè¯
- [ ] Debug Logs Tab

### v0.3 - æ‰©å±•
- [ ] æ›´å¤š Debug å·¥å…·
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç§»åŠ¨ç«¯é€‚é…ï¼Ÿ
