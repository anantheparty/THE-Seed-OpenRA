# THE-Seed Web Console è®¾è®¡æ–‡æ¡£

## æ¦‚è¿°

Web ç«¯æ§åˆ¶å°ï¼Œç”¨äºè¿œç¨‹æ“æ§ OpenRA æ¸¸æˆå’Œ AI Agentã€‚

## è®¿é—®æ–¹å¼

- **å…¬ç½‘**: `https://openra.ananthe.party` (nginx åä»£ + Basic Auth)

---

## é¡µé¢å¸ƒå±€ (å·²ç¡®è®¤ âœ…)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [æœåŠ¡æ§åˆ¶æ ]                                                          é¡¶éƒ¨  â”‚
â”‚ [Git Pull] [ç¼–è¯‘] [å¯åŠ¨æ¸¸æˆ] [é‡å¯] [åœæ­¢] | çŠ¶æ€: â— è¿è¡Œä¸­                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚                                 â”‚
â”‚                                           â”‚  [å¯¹è¯åŒº] - Tab åˆ‡æ¢            â”‚
â”‚           VNC æ¸¸æˆç”»é¢                    â”‚                                 â”‚
â”‚           (å¯äº¤äº’)                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                           â”‚  â”‚ [å‰¯å®˜] [æ•Œæ–¹]           â”‚    â”‚
â”‚           å®½åº¦: 60%                       â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚           é«˜åº¦: å›ºå®š 720px                â”‚  â”‚                         â”‚    â”‚
â”‚                                           â”‚  â”‚ èŠå¤©å†å²                â”‚    â”‚
â”‚                                           â”‚  â”‚ (å¯æ»šåŠ¨)                â”‚    â”‚
â”‚                                           â”‚  â”‚                         â”‚    â”‚
â”‚                                           â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚                                           â”‚  â”‚ [è¾“å…¥æ¡†] [å‘é€]         â”‚    â”‚
â”‚                                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                           â”‚                                 â”‚
â”‚                                           â”‚  å®½åº¦: 40%                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Debug å·¥å…·åŒº] - é»˜è®¤æŠ˜å  â–¼                                          ä¸‹æ–¹   â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ Tabs (å¯æ‰©å±•) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [ğŸ“‹ Logs] [ğŸ“Š Status] [ğŸ–¥ï¸ Terminal] [+]                              â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚ â”Œâ”€ å†…å®¹åŒº (å¯æ»šåŠ¨ï¼Œé«˜åº¦å¯æ‹–æ‹½è°ƒæ•´) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â”‚ (æŠ˜å æ—¶éšè—æ­¤åŒºåŸŸ)                                                    â”‚   â”‚
â”‚ â”‚                                                                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¨¡å—è®¾è®¡

### 1. æœåŠ¡æ§åˆ¶æ  (é¡¶éƒ¨) âœ…

| æŒ‰é’® | å‘½ä»¤ | è¯´æ˜ |
|------|------|------|
| Git Pull | `git pull` | æ‹‰å–æœ€æ–°ä»£ç  |
| ç¼–è¯‘ | `dotnet build` | åœ¨ OpenCodeAlert ç›®å½•æ‰§è¡Œ |
| å¯åŠ¨æ¸¸æˆ | `./start.sh` | åœ¨ OpenCodeAlert ç›®å½•æ‰§è¡Œ |
| é‡å¯ | kill + start | é‡å¯æ¸¸æˆ |
| åœæ­¢ | `pkill` | åœæ­¢æ¸¸æˆ |
| å¯åŠ¨ AI | `python main.py` | å¯åŠ¨ THE-Seed |

**è·¯å¾„**:
- OpenRA: `~/theseed/THE-Seed-OpenRA/OpenCodeAlert/`
- THE-Seed: `~/theseed/THE-Seed-OpenRA/`

---

### 2. VNC æ¸¸æˆç”»é¢ (å·¦ä¾§ 60%) âœ…

- åµŒå…¥ noVNC iframe
- åˆ†è¾¨ç‡: 1280x720
- é¼ æ ‡/é”®ç›˜å®Œå…¨æ˜ å°„

---

### 3. å¯¹è¯åŒº (å³ä¾§ 40%) âœ…

**Tab åˆ‡æ¢**:
- **å‰¯å®˜ (Copilot)**: æŒ‡æŒ¥å·±æ–¹ AI
  - WebSocket è¿æ¥ Console Bridge (ws://host:8090)
  - å‘é€æŒ‡ä»¤ã€æ˜¾ç¤ºå›å¤ã€å†å²è®°å½•
  
- **æ•Œæ–¹ (Enemy)**: é¢„ç•™ UI
  - æš‚ä¸å®ç°åŠŸèƒ½
  - ä¿ç•™ç•Œé¢å’Œè¾“å…¥æ¡†

---

### 4. Debug å·¥å…·åŒº (ä¸‹æ–¹) âœ…

**é»˜è®¤æŠ˜å **ï¼Œç‚¹å‡»å±•å¼€

**Tabs (ä¿æŒå¯æ‰©å±•)**:
| Tab | è¯´æ˜ | ä¼˜å…ˆçº§ |
|-----|------|--------|
| ğŸ“‹ Logs | THE-Seed æ—¥å¿— | MVP |
| ğŸ“Š Status | åŸºæœ¬çŠ¶æ€ä¿¡æ¯ | MVP |
| ğŸ–¥ï¸ Terminal | xterm.js ç»ˆç«¯ | MVP |
| + | æ‰©å±•å…¥å£ | é¢„ç•™ |

**æ—¥å¿—è·¯å¾„**: `~/theseed/THE-Seed-OpenRA/the-seed/Logs/` (åç»­ç¡®è®¤)

---

## nginx åä»£é…ç½®

```nginx
server {
    server_name openra.ananthe.party;

    # Basic Auth
    auth_basic "OpenRA Console";
    auth_basic_user_file /etc/nginx/.htpasswd;

    # Web Console ä¸»é¡µé¢
    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # noVNC WebSocket
    location /vnc/ {
        proxy_pass http://127.0.0.1:6080/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400;
    }

    # Console Bridge WebSocket
    location /api/ {
        proxy_pass http://127.0.0.1:8090/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_read_timeout 86400;
    }

    # SSL (Certbot ä¼šè‡ªåŠ¨æ·»åŠ )
    listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/openra.ananthe.party/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/openra.ananthe.party/privkey.pem;
    include /etc/letsencrypt/options-ssl-nginx.conf;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}

server {
    if ($host = openra.ananthe.party) {
        return 301 https://$host$request_uri;
    }
    server_name openra.ananthe.party;
    listen 80;
    return 404;
}
```

---

## ç«¯å£è§„åˆ’

| ç«¯å£ | æœåŠ¡ | è¯´æ˜ |
|------|------|------|
| 8000 | Web Console | é™æ€é¡µé¢æœåŠ¡ |
| 6080 | noVNC | VNC WebSocket |
| 8090 | Console Bridge | THE-Seed WebSocket |
| 5900 | VNC Server | x11vnc (å†…éƒ¨) |
| :99 | Xvfb | è™šæ‹Ÿæ˜¾ç¤º (å†…éƒ¨) |

---

## å®ç°è®¡åˆ’

### Phase 1 - MVP
- [ ] åŸºç¡€å¸ƒå±€ (VNC 60% + å¯¹è¯åŒº 40%)
- [ ] æœåŠ¡æ§åˆ¶æ  (Git Pull / ç¼–è¯‘ / å¯åŠ¨ / åœæ­¢)
- [ ] å‰¯å®˜å¯¹è¯åŠŸèƒ½
- [ ] Debug åŒºæŠ˜å æ¡†æ¶
- [ ] nginx åä»£ + Basic Auth + SSL

### Phase 2 - å®Œå–„
- [ ] xterm.js ç»ˆç«¯
- [ ] Logs Tab
- [ ] æ•Œæ–¹å¯¹è¯ UI (é¢„ç•™)

### Phase 3 - æ‰©å±•
- [ ] æ›´å¤š Debug å·¥å…·
- [ ] æ€§èƒ½ä¼˜åŒ–

---

## æ–‡ä»¶ç»“æ„

```
web-console/
â”œâ”€â”€ DESIGN.md           # æœ¬æ–‡æ¡£
â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css       # æ ·å¼
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ app.js          # ä¸»é€»è¾‘
â”‚   â”œâ”€â”€ vnc.js          # VNC æ§åˆ¶
â”‚   â”œâ”€â”€ chat.js         # å¯¹è¯åŠŸèƒ½
â”‚   â”œâ”€â”€ service.js      # æœåŠ¡æ§åˆ¶
â”‚   â””â”€â”€ terminal.js     # xterm.js
â”œâ”€â”€ start-vnc.sh        # VNC å¯åŠ¨è„šæœ¬
â””â”€â”€ api/
    â””â”€â”€ service.py      # æœåŠ¡æ§åˆ¶åç«¯ (å¯é€‰)
```
