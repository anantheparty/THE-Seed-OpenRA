{
  "passed": true,
  "failures": [],
  "metrics": {
    "backend": "char_ngram_nb_runtime",
    "test_size": 47,
    "intent_accuracy": 0.6595744680851063,
    "intent_macro_f1": 0.5573701410388717,
    "dangerous_fp_rate": 0.13333333333333333,
    "dangerous_fp_count": 2,
    "fallback_total": 15,
    "slot_key_accuracy": 0.9607843137254902,
    "slot_key_total": 102,
    "slot_key_hit": 98,
    "label_distribution": {
      "deploy_mcv": 2,
      "composite_sequence": 3,
      "produce": 15,
      "explore": 3,
      "fallback_other": 15,
      "attack": 5,
      "mine": 2,
      "query_actor": 2
    },
    "per_label": {
      "attack": {
        "precision": 0.7142857142857143,
        "recall": 1.0,
        "f1": 0.8333333333333333,
        "support": 5
      },
      "composite_sequence": {
        "precision": 0.16666666666666666,
        "recall": 0.3333333333333333,
        "f1": 0.2222222222222222,
        "support": 3
      },
      "deploy_mcv": {
        "precision": 0.0,
        "recall": 0.0,
        "f1": 0.0,
        "support": 2
      },
      "explore": {
        "precision": 0.4,
        "recall": 0.6666666666666666,
        "f1": 0.5,
        "support": 3
      },
      "fallback_other": {
        "precision": 1.0,
        "recall": 0.26666666666666666,
        "f1": 0.4210526315789474,
        "support": 15
      },
      "mine": {
        "precision": 0.6666666666666666,
        "recall": 1.0,
        "f1": 0.8,
        "support": 2
      },
      "produce": {
        "precision": 0.7894736842105263,
        "recall": 1.0,
        "f1": 0.8823529411764706,
        "support": 15
      },
      "query_actor": {
        "precision": 0.6666666666666666,
        "recall": 1.0,
        "f1": 0.8,
        "support": 2
      }
    },
    "confusion": {
      "attack": {
        "attack": 5,
        "composite_sequence": 0,
        "deploy_mcv": 0,
        "explore": 0,
        "fallback_other": 0,
        "mine": 0,
        "produce": 0,
        "query_actor": 0
      },
      "composite_sequence": {
        "attack": 0,
        "composite_sequence": 1,
        "deploy_mcv": 0,
        "explore": 1,
        "fallback_other": 0,
        "mine": 0,
        "produce": 1,
        "query_actor": 0
      },
      "deploy_mcv": {
        "attack": 0,
        "composite_sequence": 2,
        "deploy_mcv": 0,
        "explore": 0,
        "fallback_other": 0,
        "mine": 0,
        "produce": 0,
        "query_actor": 0
      },
      "explore": {
        "attack": 0,
        "composite_sequence": 0,
        "deploy_mcv": 0,
        "explore": 2,
        "fallback_other": 0,
        "mine": 0,
        "produce": 0,
        "query_actor": 1
      },
      "fallback_other": {
        "attack": 2,
        "composite_sequence": 3,
        "deploy_mcv": 0,
        "explore": 2,
        "fallback_other": 4,
        "mine": 1,
        "produce": 3,
        "query_actor": 0
      },
      "mine": {
        "attack": 0,
        "composite_sequence": 0,
        "deploy_mcv": 0,
        "explore": 0,
        "fallback_other": 0,
        "mine": 2,
        "produce": 0,
        "query_actor": 0
      },
      "produce": {
        "attack": 0,
        "composite_sequence": 0,
        "deploy_mcv": 0,
        "explore": 0,
        "fallback_other": 0,
        "mine": 0,
        "produce": 15,
        "query_actor": 0
      },
      "query_actor": {
        "attack": 0,
        "composite_sequence": 0,
        "deploy_mcv": 0,
        "explore": 0,
        "fallback_other": 0,
        "mine": 0,
        "produce": 0,
        "query_actor": 2
      }
    }
  },
  "dataset": {
    "total": 262,
    "train": 180,
    "dev": 35,
    "test": 47,
    "distribution": {
      "attack": 24,
      "composite_sequence": 16,
      "deploy_mcv": 5,
      "explore": 12,
      "fallback_other": 91,
      "mine": 8,
      "produce": 96,
      "query_actor": 10
    }
  },
  "prelabel": {
    "input_rows": 199,
    "output_rows": 199,
    "llm_enabled": true,
    "llm_calls": 12,
    "llm_success": 12,
    "fallback_count": 126,
    "preserved_labeled_rows": 61,
    "model": "deepseek-chat",
    "base_url": "https://api.deepseek.com"
  },
  "runtime_gateway_smoke": {
    "gateway_status": {
      "agent": "smoke",
      "enabled": true,
      "active": true,
      "shadow_mode": false,
      "model_loaded": true,
      "runtime_model_path": "nlu_pipeline/artifacts/intent_model_runtime.json",
      "safe_intents": [
        "deploy_mcv",
        "produce",
        "explore",
        "mine",
        "query_actor"
      ]
    },
    "route_count": 2,
    "fallback_count": 3,
    "cases": [
      {
        "text": "造两个步兵",
        "source": "nlu_route",
        "reason": "safe_intent_routed",
        "intent": "produce",
        "confidence": 0.8092264227239186,
        "success": true
      },
      {
        "text": "展开基地车",
        "source": "nlu_route",
        "reason": "safe_router_override",
        "intent": "composite_sequence",
        "confidence": 0.9976888111927918,
        "success": true
      },
      {
        "text": "打开设置",
        "source": "llm_fallback",
        "reason": "blocked_by_safety_pattern",
        "intent": null,
        "confidence": 0.0,
        "success": true
      },
      {
        "text": "停止攻击",
        "source": "llm_fallback",
        "reason": "blocked_by_safety_pattern",
        "intent": null,
        "confidence": 0.0,
        "success": true
      },
      {
        "text": "用坦克攻击敌方矿车",
        "source": "llm_fallback",
        "reason": "high_risk_intent_blocked",
        "intent": "attack",
        "confidence": 0.9998663582996887,
        "success": true
      }
    ],
    "failures": [],
    "passed": true
  }
}